<div class="container bg-scheme-light">
  <!-- Header -->
  <div class="header">
    <h1>GateCrasher - Lobby</h1>
  </div>

  <!-- Main Content Area -->
  <div class="content">
    <!-- Players Section -->
    <div class="players-section">
      <h2>Players</h2>
      <div class="players-list">
        @for ( player of players(); track player.id ) {
          <div class="player-item" [class.ready]="player.ready" [class.waiting]="!player.ready">
            <span class="player-name">{{ player.name }} {{player.id === currentPlayerId ? '(YOU)' : ''}}</span>
            <span class="player-role" [class.admin]="player.role === 'Admin'">{{ player.role }}</span>
            <span class="ready-status">
              {{ player.ready ? '✓ Ready' : '⏳ Waiting' }}
            </span>
            <button class="btn btn-kick" *ngIf="players()[0].id === currentPlayerId && player.id !== currentPlayerId" (click)="kickPlayer(player.id)">Kick</button>
          </div>
        }
      </div>
      <div class="insufficient-players-warning"
           *ngIf="players().length &lt; 3">
        There must be three or more players to start the game.
      </div>
    </div>

    <!-- Settings Section -->
    <div class="settings-section">
      <h3>Settings — Draw: {{ timeToDraw() }}s · Vote: {{ timeToVote() }}s
      </h3>
      <div *ngIf="players()[0].id === currentPlayerId" class="settings-group">
        <label>
          Time to draw (seconds):
          <input type="number" min="5" [value]="timeToDraw()" #drawInput (input)="timeToDraw.set(drawInput.valueAsNumber)" />
        </label>
        <label>
          Time to vote (seconds):
          <input type="number" min="5" [value]="timeToVote()" #voteInput (input)="timeToVote.set(voteInput.valueAsNumber)" />
        </label>
        <!-- <label>
          Number of rounds:
          <input type="number" min="1" [value]="rounds()" #roundsInput (input)="rounds.set(roundsInput.valueAsNumber)" />
        </label> -->
        <label>
          Total Number of Requirements:
          <input type="number" min="1" [value]="totalNumberOfRequirements()" #totalReqInput (input)="totalNumberOfRequirements.set(totalReqInput.valueAsNumber)" />
        </label>
        <label>
          Good Player Number of Requirements:
          <input type="number" min="1" [value]="goodPlayerNumberOfRequirements()" #goodReqInput (input)="goodPlayerNumberOfRequirements.set(goodReqInput.valueAsNumber)" />
        </label>
        <label>
          Bad Player Number of Requirements:
          <input type="number" min="1" [value]="badPlayerNumberOfRequirements()" #badReqInput (input)="badPlayerNumberOfRequirements.set(badReqInput.valueAsNumber)" />
        </label>
        <label>
          Use Long Mask Descriptions:
          <input type="checkbox" [checked]="useLongMaskDescriptions()" (change)="useLongMaskDescriptions.set($event.target.checked)" />
        </label>
        <div class="settings-actions">
          <button (click)="saveSettings()">Save Settings</button>
        </div>
      </div>
      <div class="settings-group">
        <label>
          Share Lobby Link:
          <input type="text" value="{{joinUrl()}}" #shareInput/>
          <button (click)="copyToClipboard(shareInput.value)">Copy</button>
        </label>
        <label>
          <qrcode [qrdata]="joinUrl()" [width]="150" [errorCorrectionLevel]="'M'"></qrcode>
        </label>
      </div>
 
  </div>

  <!-- Footer / Actions -->
  <div class="footer">
    <button class="btn btn-leave" (click)="leaveGame()">Leave Game</button>
    <button class="btn btn-ready" (click)="toggleReady()" [disabled]="currentPlayerReady">{{ currentPlayerReady ? 'You are Ready!' : 'Ready' }}</button>
  </div>
</div>
